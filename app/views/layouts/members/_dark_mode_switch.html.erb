<script>
  // https://flowbite.com/docs/customize/dark-mode/#dark-mode-switcher
  function getSafeLocalStorageItem(key) {
    try {
      return localStorage.getItem(key);
    } catch (e) {
      console.warn("Unable to access localStorage:", e);
      return null;
    }
  }

  function isLocalStorageAvailable() {
    try {
      localStorage.setItem("test", "test");
      localStorage.removeItem("test");
      return true;
    } catch (e) {
      return false;
    }
  }

  if (
    getSafeLocalStorageItem("color-theme") === "dark" ||
    ((!isLocalStorageAvailable() || !("color-theme" in localStorage)) &&
      window.matchMedia("(prefers-color-scheme: dark)").matches)
  ) {
    document.documentElement.classList.add("dark");
  } else {
    document.documentElement.classList.remove("dark");
  }
</script>
