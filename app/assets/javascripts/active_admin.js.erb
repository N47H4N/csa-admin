//= require active_admin/base
//= require jquery-ui/i18n/datepicker-fr-CH
//= require jquery-ui/i18n/datepicker-de
//= require jquery.timepicker

$(function() {
  var locale = document.documentElement.lang
  if (locale === 'fr') {
    $.datepicker.setDefaults($.datepicker.regional['fr-CH']);
  } else {
    $.datepicker.setDefaults($.datepicker.regional[locale]);
  }

  $('#activity_preset_id').on('change', function() {
    if (this.value === '0') {
      $('input.js-preset').prop('disabled', false);
      $('input.js-preset').prop('value', '');
    } else {
      $('input.js-preset').prop('disabled', true);
      $('input.js-preset').prop('value', 'preset');
    }
  });

  $('#basket_content_basket_sizes_small, #basket_content_basket_sizes_big').on(
    'change',
    function() {
      var bigBasketChecked, sameBasketQuantityLabel, sameBasketQuantityCheckbox, smallBasketChecked;
      sameBasketQuantityLabel = $('label[for="basket_content_same_basket_quantities"]');
      sameBasketQuantityCheckbox = $('#basket_content_same_basket_quantities');
      sameBasketQuantityCheckbox.prop('checked', false);
      smallBasketChecked = $('#basket_content_basket_sizes_small').prop('checked');
      bigBasketChecked = $('#basket_content_basket_sizes_big').prop('checked');
      if (!smallBasketChecked || !bigBasketChecked) {
        sameBasketQuantityCheckbox.prop('disabled', true);
        sameBasketQuantityLabel.addClass('disabled');
      }
      if (smallBasketChecked && bigBasketChecked) {
        sameBasketQuantityCheckbox.prop('disabled', false);
        sameBasketQuantityLabel.removeClass('disabled');
        return;
      }
    }
  );

  $('#basket_content_basket_sizes_small').on('change', function() {
    var smallBasketCheckbox, bigBasketCheckbox;
    smallBasketCheckbox = $('#basket_content_basket_sizes_small');
    bigBasketCheckbox = $('#basket_content_basket_sizes_big');
    if (!smallBasketCheckbox.prop('checked') && !bigBasketCheckbox.prop('checked')) {
      bigBasketCheckbox.prop('checked', true);
    }
  });

  $('#basket_content_basket_sizes_big').on('change', function() {
    var smallBasketCheckbox, bigBasketCheckbox;
    smallBasketCheckbox = $('#basket_content_basket_sizes_small');
    bigBasketCheckbox = $('#basket_content_basket_sizes_big');
    if (!smallBasketCheckbox.prop('checked') && !bigBasketCheckbox.prop('checked')) {
      smallBasketCheckbox.prop('checked', true);
    }
  });

  $('.js-reset_price').on('change', function() {
    var nextInput = $(':input:eq(' + ($(':input').index(this) + 1) + ')');
    nextInput.prop('value', '');
  });

  $('input[type="time"]').timepicker({
    timeFormat: 'HH:mm',
    interval: 15,
    minTime: '6:00',
    maxTime: '23:30',
    dynamic: false,
    dropdown: true,
    scrollbar: true
  });

  $("li#logout a").html("<img src='<%= asset_path 'sign_out-grey.svg' %>' height='20' width='20' />");
});
