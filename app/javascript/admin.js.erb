// Configure your import map in config/importmap.rb. Read more: https://github.com/rails/importmap-rails

<% if Rails.env.production? %>
  import "components/sentry"
<% end %>
import "trix"
import "@rails/actiontext"
import "controllers/admin"

const allowedTypes = ["image/png", "image/jpg", "image/jpeg", "image/gif"]

document.addEventListener("trix-file-accept", e => {
  if (!allowedTypes.includes(e.file.type)) {
    e.preventDefault();
    alert("Only images are allowed!");
  }
})

Trix.config.attachments.preview.caption = { name: false, size: false }
