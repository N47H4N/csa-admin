import{createTransport as e,addGlobalEventProcessor as t,getCurrentHub as r,Integrations as n,getIntegrationsToSetup as a,initAndBind as i,getReportDialogEndpoint as o}from"@sentry/core";export{FunctionToString,Hub,InboundFilters,SDK_VERSION,Scope,addBreadcrumb,addGlobalEventProcessor,captureEvent,captureException,captureMessage,configureScope,createTransport,getCurrentHub,getHubFromCarrier,makeMain,setContext,setExtra,setExtras,setTag,setTags,setUser,startTransaction,withScope}from"@sentry/core";import{g as s,B as u}from"../_/2699c729.js";export{B as BrowserClient}from"../_/2699c729.js";import{SyncPromise as c,createStackParser as d,getGlobalObject as p,fill as l,getFunctionName as v,getOriginalFunction as f,logger as _,stackParserFromStackParserOptions as m,supportsFetch as h,resolvedSyncPromise as E,addInstrumentationHandler as g}from"@sentry/utils";import{wrap as S}from"./helpers.js";import{GlobalHandlers as y}from"./integrations/globalhandlers.js";export{GlobalHandlers}from"./integrations/globalhandlers.js";import{Breadcrumbs as T}from"./integrations/breadcrumbs.js";export{Breadcrumbs}from"./integrations/breadcrumbs.js";import{LinkedErrors as R}from"./integrations/linkederrors.js";export{LinkedErrors}from"./integrations/linkederrors.js";import"../_/50c318db.js";function makeFetchTransport(t,r=s()){function makeRequest(e){var n={body:e.body,method:"POST",referrerPolicy:"origin",headers:t.headers,...t.fetchOptions};return r(t.url,n).then((e=>({statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}return e(t,makeRequest)}var x=4;function makeXHRTransport(t){function makeRequest(e){return new c(((r,n)=>{var a=new XMLHttpRequest;a.onerror=n;a.onreadystatechange=()=>{a.readyState===x&&r({statusCode:a.status,headers:{"x-sentry-rate-limits":a.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":a.getResponseHeader("Retry-After")}})};a.open("POST",t.url);for(var i in t.headers)Object.prototype.hasOwnProperty.call(t.headers,i)&&a.setRequestHeader(i,t.headers[i]);a.send(e.body)}))}return e(t,makeRequest)}var b="?";var w=10;var k=20;var D=30;var C=40;var F=50;function createFrame(e,t,r,n){var a={filename:e,function:t,in_app:true};void 0!==r&&(a.lineno=r);void 0!==n&&(a.colno=n);return a}var H=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i;var L=/\((\S*)(?::(\d+))(?::(\d+))\)/;var chrome=e=>{var t=H.exec(e);if(t){var r=t[2]&&0===t[2].indexOf("eval");if(r){var n=L.exec(t[2]);if(n){t[2]=n[1];t[3]=n[2];t[4]=n[3]}}const[e,a]=extractSafariExtensionDetails(t[1]||b,t[2]);return createFrame(a,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}};var N=[D,chrome];var q=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i;var I=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;var gecko=e=>{var t=q.exec(e);if(t){var r=t[3]&&t[3].indexOf(" > eval")>-1;if(r){var n=I.exec(t[3]);if(n){t[1]=t[1]||"eval";t[3]=n[1];t[4]=n[2];t[5]=""}}let e=t[3];let a=t[1]||b;[a,e]=extractSafariExtensionDetails(a,e);return createFrame(e,a,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}};var O=[F,gecko];var j=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;var winjs=e=>{var t=j.exec(e);return t?createFrame(t[2],t[1]||b,+t[3],t[4]?+t[4]:void 0):void 0};var G=[C,winjs];var M=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i;var opera10=e=>{var t=M.exec(e);return t?createFrame(t[2],t[3]||b,+t[1]):void 0};var U=[w,opera10];var A=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i;var opera11=e=>{var t=A.exec(e);return t?createFrame(t[5],t[3]||t[4]||b,+t[1],+t[2]):void 0};var Y=[k,opera11];var X=[N,O,G];var P=d(...X);var extractSafariExtensionDetails=(e,t)=>{var r=-1!==e.indexOf("safari-extension");var n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:b,r?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};var $=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class TryCatch{static __initStatic(){this.id="TryCatch"}__init(){this.name=TryCatch.id}constructor(e){TryCatch.prototype.__init.call(this);this._options={XMLHttpRequest:true,eventTarget:true,requestAnimationFrame:true,setInterval:true,setTimeout:true,...e}}setupOnce(){var e=p();this._options.setTimeout&&l(e,"setTimeout",_wrapTimeFunction);this._options.setInterval&&l(e,"setInterval",_wrapTimeFunction);this._options.requestAnimationFrame&&l(e,"requestAnimationFrame",_wrapRAF);this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&l(XMLHttpRequest.prototype,"send",_wrapXHR);var t=this._options.eventTarget;if(t){var r=Array.isArray(t)?t:$;r.forEach(_wrapEventTarget)}}}TryCatch.__initStatic();function _wrapTimeFunction(e){return function(...t){var r=t[0];t[0]=S(r,{mechanism:{data:{function:v(e)},handled:true,type:"instrument"}});return e.apply(this,t)}}function _wrapRAF(e){return function(t){return e.apply(this,[S(t,{mechanism:{data:{function:"requestAnimationFrame",handler:v(e)},handled:true,type:"instrument"}})])}}function _wrapXHR(e){return function(...t){var r=this;var n=["onload","onerror","onprogress","onreadystatechange"];n.forEach((e=>{e in r&&"function"===typeof r[e]&&l(r,e,(function(t){var r={mechanism:{data:{function:e,handler:v(t)},handled:true,type:"instrument"}};var n=f(t);n&&(r.mechanism.data.handler=v(n));return S(t,r)}))}));return e.apply(this,t)}}function _wrapEventTarget(e){var t=p();var r=t[e]&&t[e].prototype;if(r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")){l(r,"addEventListener",(function(t){return function(r,n,a){try{"function"===typeof n.handleEvent&&(n.handleEvent=S(n.handleEvent,{mechanism:{data:{function:"handleEvent",handler:v(n),target:e},handled:true,type:"instrument"}}))}catch(e){}return t.apply(this,[r,S(n,{mechanism:{data:{function:"addEventListener",handler:v(n),target:e},handled:true,type:"instrument"}}),a])}}));l(r,"removeEventListener",(function(e){return function(t,r,n){var a=r;try{var i=a&&a.__sentry_wrapped__;i&&e.call(this,t,i,n)}catch(e){}return e.call(this,t,a,n)}}))}}var W=p();class HttpContext{constructor(){HttpContext.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=HttpContext.id}setupOnce(){t((e=>{if(r().getIntegration(HttpContext)){if(!W.navigator&&!W.location&&!W.document)return e;var t=e.request&&e.request.url||W.location&&W.location.href;const{referrer:r}=W.document||{};const{userAgent:i}=W.navigator||{};var n={...e.request&&e.request.headers,...r&&{Referer:r},...i&&{"User-Agent":i}};var a={...t&&{url:t},headers:n};return{...e,request:a}}return e}))}}HttpContext.__initStatic();class Dedupe{constructor(){Dedupe.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=Dedupe.id}setupOnce(e,t){var eventProcessor=e=>{var r=t().getIntegration(Dedupe);if(r){try{if(_shouldDropEvent(e,r._previousEvent)){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.warn("Event dropped due to being a duplicate of previously captured event.");return null}}catch(t){return r._previousEvent=e}return r._previousEvent=e}return e};eventProcessor.id=this.name;e(eventProcessor)}}Dedupe.__initStatic();function _shouldDropEvent(e,t){return!!t&&(!!_isSameMessageEvent(e,t)||!!_isSameExceptionEvent(e,t))}function _isSameMessageEvent(e,t){var r=e.message;var n=t.message;return!(!r&&!n)&&(!(r&&!n||!r&&n)&&(r===n&&(!!_isSameFingerprint(e,t)&&!!_isSameStacktrace(e,t))))}function _isSameExceptionEvent(e,t){var r=_getExceptionFromEvent(t);var n=_getExceptionFromEvent(e);return!(!r||!n)&&(r.type===n.type&&r.value===n.value&&(!!_isSameFingerprint(e,t)&&!!_isSameStacktrace(e,t)))}function _isSameStacktrace(e,t){let r=_getFramesFromEvent(e);let n=_getFramesFromEvent(t);if(!r&&!n)return true;if(r&&!n||!r&&n)return false;r=r;n=n;if(n.length!==r.length)return false;for(let e=0;e<n.length;e++){var a=n[e];var i=r[e];if(a.filename!==i.filename||a.lineno!==i.lineno||a.colno!==i.colno||a.function!==i.function)return false}return true}function _isSameFingerprint(e,t){let r=e.fingerprint;let n=t.fingerprint;if(!r&&!n)return true;if(r&&!n||!r&&n)return false;r=r;n=n;try{return!!(r.join("")===n.join(""))}catch(e){return false}}function _getExceptionFromEvent(e){return e.exception&&e.exception.values&&e.exception.values[0]}function _getFramesFromEvent(e){var t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}var z=Object.freeze(Object.defineProperty({__proto__:null,GlobalHandlers:y,TryCatch:TryCatch,Breadcrumbs:T,LinkedErrors:R,HttpContext:HttpContext,Dedupe:Dedupe},Symbol.toStringTag,{value:"Module"}));var K=[new n.InboundFilters,new n.FunctionToString,new TryCatch,new T,new y,new R,new Dedupe,new HttpContext];function init(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=K);if(void 0===e.release){var t=p();t.SENTRY_RELEASE&&t.SENTRY_RELEASE.id&&(e.release=t.SENTRY_RELEASE.id)}void 0===e.autoSessionTracking&&(e.autoSessionTracking=true);void 0===e.sendClientReports&&(e.sendClientReports=true);var r={...e,stackParser:m(e.stackParser||P),integrations:a(e),transport:e.transport||(h()?makeFetchTransport:makeXHRTransport)};i(u,r);e.autoSessionTracking&&startSessionTracking()}
/**
 * Present the user with a report dialog.
 *
 * @param options Everything is optional, we try to fetch all info need from the global scope.
 */function showReportDialog(e={},t=r()){var n=p();if(!n.document){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.error("Global document not defined in showReportDialog call");return}const{client:a,scope:i}=t.getStackTop();var s=e.dsn||a&&a.getDsn();if(s){i&&(e.user={...i.getUser(),...e.user});e.eventId||(e.eventId=t.lastEventId());var u=n.document.createElement("script");u.async=true;u.src=o(s,e);e.onLoad&&(u.onload=e.onLoad);var c=n.document.head||n.document.body;c?c.appendChild(u):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.error("Not injecting report dialog. No injection point found in HTML")}else("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.error("DSN not configured for showReportDialog call")}
/**
 * This is the getter for lastEventId.
 *
 * @returns The last event id of a captured event.
 */function lastEventId(){return r().lastEventId()}function forceLoad(){}function onLoad(e){e()}
/**
 * Call `flush()` on the current client, if there is one. See {@link Client.flush}.
 *
 * @param timeout Maximum time in ms the client should wait to flush its event queue. Omitting this parameter will cause
 * the client to wait until all events are sent before resolving the promise.
 * @returns A promise which resolves to `true` if the queue successfully drains before the timeout, or `false` if it
 * doesn't (or if there's no client defined).
 */function flush(e){var t=r().getClient();if(t)return t.flush(e);("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.warn("Cannot flush events. No client defined.");return E(false)}
/**
 * Call `close()` on the current client, if there is one. See {@link Client.close}.
 *
 * @param timeout Maximum time in ms the client should wait to flush its event queue before shutting down. Omitting this
 * parameter will cause the client to wait until all events are sent before disabling itself.
 * @returns A promise which resolves to `true` if the queue successfully drains before the timeout, or `false` if it
 * doesn't (or if there's no client defined).
 */function close(e){var t=r().getClient();if(t)return t.close(e);("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.warn("Cannot flush events and disable SDK. No client defined.");return E(false)}
/**
 * Wrap code within a try/catch block so the SDK is able to capture errors.
 *
 * @param fn A function to wrap.
 *
 * @returns The result of wrapped function call.
 */function wrap(e){return S(e)()}function startSessionOnHub(e){e.startSession({ignoreDuration:true});e.captureSession()}function startSessionTracking(){var e=p();var t=e.document;if("undefined"!==typeof t){var n=r();if(n.captureSession){startSessionOnHub(n);g("history",(({from:e,to:t})=>{void 0===e||e===t||startSessionOnHub(r())}))}}else("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.warn("Session tracking in non-browser environment with @sentry/browser is not supported.")}let V={};var J=p();J.Sentry&&J.Sentry.Integrations&&(V=J.Sentry.Integrations);var Q={...V,...n,...z};export{Dedupe,HttpContext,Q as Integrations,TryCatch,N as chromeStackLineParser,close,K as defaultIntegrations,X as defaultStackLineParsers,P as defaultStackParser,flush,forceLoad,O as geckoStackLineParser,init,lastEventId,makeFetchTransport,makeXHRTransport,onLoad,U as opera10StackLineParser,Y as opera11StackLineParser,showReportDialog,G as winjsStackLineParser,wrap};

